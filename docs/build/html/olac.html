

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>olac package &mdash; olac 0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="olac" href="modules.html" />
    <link rel="prev" title="Decisions and logs" href="log.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> olac
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="olac_docs.html">OLAC - Online Learning at Cost</a></li>
<li class="toctree-l1"><a class="reference internal" href="log.html">Decisions and logs</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">olac package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-olac.cost_of_label">olac.cost_of_label module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-olac.data_generators">olac.data_generators module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-olac.maths">olac.maths module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-olac.perceptron">olac.perceptron module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-olac.pipeline">olac.pipeline module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-olac.utils">olac.utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-olac.vis">olac.vis module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-olac">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">olac</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">olac package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-olac.cost_of_label">olac.cost_of_label module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-olac.data_generators">olac.data_generators module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-olac.maths">olac.maths module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-olac.perceptron">olac.perceptron module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-olac.pipeline">olac.pipeline module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-olac.utils">olac.utils module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-olac.vis">olac.vis module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-olac">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="python.html">python package</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup.html">setup module</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">olac</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>olac package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/olac.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="olac-package">
<h1>olac package<a class="headerlink" href="#olac-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-olac.cost_of_label">
<span id="olac-cost-of-label-module"></span><h2>olac.cost_of_label module<a class="headerlink" href="#module-olac.cost_of_label" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="olac.cost_of_label.cost_investigation">
<code class="descclassname">olac.cost_of_label.</code><code class="descname">cost_investigation</code><span class="sig-paren">(</span><em>data_point</em>, <em>decision</em>, <em>salary=-1.0</em>, <em>fraud_label=1</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.cost_of_label.cost_investigation" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that looks at the data is there fraud or not compared to what the model predicts.
We want to obtain the labels, did we make a correct decission or not and the cost consequences are made
:param data_point:
:type data_point: series or array like object that has as last entry the true label
:param decision:
:type decision: array or bool if we have investigated the record or not
:param salary:
:type salary: how much does a standard investigation cost, default = -1
:param fraud_label:
:type fraud_label: default we have determined fraud at 1</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">cost of investigating for a label</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="olac.cost_of_label.cost_of_label">
<code class="descclassname">olac.cost_of_label.</code><code class="descname">cost_of_label</code><span class="sig-paren">(</span><em>data</em>, <em>decision</em>, <em>data_type='point'</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.cost_of_label.cost_of_label" title="Permalink to this definition">¶</a></dt>
<dd><p>This function gives back the cost of obtaining a label from the incoming data. It will check if the classification
of the points one wants to investigate is correct and assesses a profit or loss on each result.</p>
<p>a data point has the format [x,y,label] where label is always the last entry in the list</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>can be either a data point</em><em> or </em><em>a array of data points.</em>) – </li>
<li><strong>decision</strong> (<em>bool</em><em> or </em><em>array of bools</em><em>, </em><em>investigate a point True</em><em> or </em><em>False</em>) – </li>
<li><strong>data_type</strong> (<em>how does the data come in</em><em>, </em><em>either 'array'</em><em> or </em><em>'point' like.</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">costs for obtaining a certain label of a data point or labels of an array of data points</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-olac.data_generators">
<span id="olac-data-generators-module"></span><h2>olac.data_generators module<a class="headerlink" href="#module-olac.data_generators" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="olac.data_generators.cluster_generator">
<code class="descclassname">olac.data_generators.</code><code class="descname">cluster_generator</code><span class="sig-paren">(</span><em>n_clusters=5</em>, <em>n_points=1000</em>, <em>slider='poisson'</em>, <em>cluster_width=10.0</em>, <em>amount_of_labels=2</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.data_generators.cluster_generator" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that returns a dataset with timestamps/time dimension and positional coordinates.
The function will generate x points where x is determined by (n_clusters + tail_time)/dt
To determine the label of a cluster there is a randomly drawn from a pdf. The pdf is modular in time. Two options
are used in the current model. One is a sum of squared sinuses and the other a moving poisson distribution.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>n_clusters</strong> (<em>int</em>) – Default n_clusters = 5, amount clusters that will be generated in the simulation</li>
<li><strong>n_points</strong> (<em>int</em>) – Default n_points = 1000, amount of points that will be generated</li>
<li><strong>slider</strong> (<em>basestring</em>) – Either poisson or sinus, determines the way how the probabilities move along with the time</li>
<li><strong>cluster_width</strong> (<em>float</em>) – The maximum width of the cluster distributions</li>
<li><strong>amount_of_labels</strong> (<em>int</em>) – Default amount_of_labels = 2, because you have either good or bad</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">points which will occur in time with a label and position</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.array</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="olac.data_generators.delayed_generator">
<code class="descclassname">olac.data_generators.</code><code class="descname">delayed_generator</code><span class="sig-paren">(</span><em>data_generator</em>, <em>delay</em>, <em>precision=0.001</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.data_generators.delayed_generator" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper function to delay the output of another generator.</p>
<p>The delay parameter controls how much time should pass between iterations.
Note that if the underlying data_generator is slower than the delay time,
then the slower time will be observed.</p>
<p>delay may also be callable, for generating random delays at each iteration.
Then delay() will be called at each iteration, and the output number will
be used as the delay for that iteration.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data_generator</strong> (<em>iterable</em>) – The generator whose output to delay</li>
<li><strong>delay</strong> (<em>float</em><em> or </em><em>callable</em>) – The delay per iteration. If callable, delay() should return a float. It
will be called once per iteration. Can be used to create a random delay.</li>
<li><strong>precision</strong> (<em>float</em><em> (</em><em>default 1e-3</em><em>)</em>) – <p>How precise the delay should be. If precision=0.1, then the observed
delay should be within 0.1 of the delay parameter. Note that a higher
precision requires more CPU cycles.</p>
<p>This parameter is an indication, not a guarantee, especially in cases
of long running underlying data_generator processes.</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yields:</th><td class="field-body"><p class="first last"><em>The items of data_generator</em></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="olac.data_generators.rand_walk">
<code class="descclassname">olac.data_generators.</code><code class="descname">rand_walk</code><span class="sig-paren">(</span><em>start=0</em>, <em>steps=1000</em>, <em>batch=False</em>, <em>rvs_func=&lt;built-in method normal of mtrand.RandomState object&gt;</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.data_generators.rand_walk" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a random time-series where the movement at time t is a sample from the given distribution.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>start</strong> (<em>int</em>) – The y coordinate at time zero</li>
<li><strong>steps</strong> (<em>int</em>) – Number of steps to generate. Will generate forever if <cite>steps==0</cite>.</li>
<li><strong>batch</strong> (<em>boolean</em><em> [</em><em>Optional</em><em>]</em>) – Whether the functions should return or yield</li>
<li><strong>rvs_func</strong> (<em>function</em>) – The random variate generator function, e.g. np.random.normal</li>
<li><strong>**kwargs</strong> – parameters for the rvs_func</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>ndarray</em> – The generated time series if batch</li>
<li><em>int</em> – If not batch, yield the next value</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="olac.data_generators.roving_balls">
<code class="descclassname">olac.data_generators.</code><code class="descname">roving_balls</code><span class="sig-paren">(</span><em>balls=2</em>, <em>steps=1000</em>, <em>period=1000</em>, <em>radius=5</em>, <em>vars=1</em>, <em>center=(0</em>, <em>0)</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.data_generators.roving_balls" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator for the roving balls dataset.</p>
<p>The generator will terminate after <cite>steps</cite> steps, or will go on forever if
<cite>steps==0</cite>.git st</p>
<p>See notebooks/jdp-data-roving-balls.ipynb for examples.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>balls</strong> (<em>int</em>) – The number of balls to use</li>
<li><strong>steps</strong> (<em>int</em>) – Number of steps to generate. Will generate forever if <cite>steps==0</cite>.</li>
<li><strong>period</strong> (<em>int</em>) – Period of rotation of the balls</li>
<li><strong>radius</strong> (<em>int</em>) – Radius of the entire dataset</li>
<li><strong>vars</strong> (<em>float</em><em> or </em><em>iterable</em>) – The variances of the balls. If iterable, must have length equal to
number of balls.</li>
<li><strong>center</strong> (<em>tuple</em>) – The center of the entire dataset</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yields:</th><td class="field-body"><p class="first last"><em>np.ndarray</em> – Data point of form [x1, x2, label]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-olac.maths">
<span id="olac-maths-module"></span><h2>olac.maths module<a class="headerlink" href="#module-olac.maths" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="olac.maths.auto_bin">
<code class="descclassname">olac.maths.</code><code class="descname">auto_bin</code><span class="sig-paren">(</span><em>arr</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.maths.auto_bin" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine optimal number of bins for a given array</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>arr</strong> (<em>ndarray</em>) – The input array</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Approximation of the optimal number of bins</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="olac.maths.dist_coefs">
<code class="descclassname">olac.maths.</code><code class="descname">dist_coefs</code><span class="sig-paren">(</span><em>coefs</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.maths.dist_coefs" title="Permalink to this definition">¶</a></dt>
<dd><p>Describe the distribution of the coefficients</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>coefs</strong> (<em>ndarray</em>) – Numpy array containing the coefficients of the linear least squares fits</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="olac.maths.hellinger_dist">
<code class="descclassname">olac.maths.</code><code class="descname">hellinger_dist</code><span class="sig-paren">(</span><em>p</em>, <em>q</em>, <em>eps=1e-05</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.maths.hellinger_dist" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the hellinger_dist for concrete distributions</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>p</strong> (<em>ndarray</em>) – The first array to compare to the second</li>
<li><strong>q</strong> (<em>ndarray</em>) – The second array to compare to the first</li>
<li><strong>eps</strong> (<em>float</em><em> (</em><em>optional</em><em>)</em>) – Correction factor to prevent null values</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>float</em> – hellinger_dist</li>
<li><em>Reference</em></li>
<li><em>———</em></li>
<li><strong>[1] https</strong> (<em>//en.wikipedia.org/wiki/Hellinger_distance</em>)</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="olac.maths.kl_div">
<code class="descclassname">olac.maths.</code><code class="descname">kl_div</code><span class="sig-paren">(</span><em>p</em>, <em>q</em>, <em>eps=1e-05</em>, <em>full_outp=False</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.maths.kl_div" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the Kullback–Leibler divergence score.</p>
<p>The function calculates the average KL divergence score taking each array as base at a time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>p</strong> (<em>ndarray</em>) – The first array to compare to the second</li>
<li><strong>q</strong> (<em>ndarray</em>) – The second array to compare to the first</li>
<li><strong>eps</strong> (<em>float</em><em> (</em><em>optional</em><em>)</em>) – Correction factor to prevent null values</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>float</em> – KL div score</li>
<li><em>Reference</em></li>
<li><em>———</em></li>
<li><strong>[1] https</strong> (<em>//en.wikipedia.org/wiki/Kullback–Leibler_divergence</em>)</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="olac.maths.linear_ls">
<code class="descclassname">olac.maths.</code><code class="descname">linear_ls</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>constant=True</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.maths.linear_ls" title="Permalink to this definition">¶</a></dt>
<dd><p>Fast linear least squares</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>x</strong> (<em>ndarray</em>) – The independent variables, features, over which to fit</li>
<li><strong>y</strong> (<em>ndarray</em>) – The dependent variable which we want approximate</li>
<li><strong>constant</strong> (<em>boolean</em><em> (</em><em>optional</em><em>)</em>) – Whether a constant should be added, default is True</li>
<li><strong>Returns</strong> – </li>
<li><strong>np.matrix</strong> – The coefficients that minimise the square error</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="olac.maths.rotation_matrix">
<code class="descclassname">olac.maths.</code><code class="descname">rotation_matrix</code><span class="sig-paren">(</span><em>theta: float</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.maths.rotation_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a rotation matrix to rotate a 2d vector by theta.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>theta</strong> (<em>float</em>) – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">The 2x2 rotation matrix</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="olac.maths.seq_linear_ls">
<code class="descclassname">olac.maths.</code><code class="descname">seq_linear_ls</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>window_size=10</em>, <em>constant=True</em>, <em>axis=0</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.maths.seq_linear_ls" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the linear fits for each period</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>ndarray</em>) – The independent variables, features, over which to fit</li>
<li><strong>y</strong> (<em>ndarray</em>) – The dependent variable which we want approximate</li>
<li><strong>window_size</strong> (<em>int</em><em> (</em><em>optional</em><em>)</em>) – The number of observations that will included in a period</li>
<li><strong>constant</strong> (<em>boolean</em><em> (</em><em>optional</em><em>)</em>) – Whether a constant should be added, default is True</li>
<li><strong>axis</strong> (<em>int</em>) – The axis over which to split the input array</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>coefs</strong> (<em>ndarray</em>) – An numpy array containing the coefficients.</li>
<li><strong>ind</strong> (<em>list</em>) – The indexes of the periods</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-olac.perceptron">
<span id="olac-perceptron-module"></span><h2>olac.perceptron module<a class="headerlink" href="#module-olac.perceptron" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="olac.perceptron.Perceptron">
<em class="property">class </em><code class="descclassname">olac.perceptron.</code><code class="descname">Perceptron</code><a class="headerlink" href="#olac.perceptron.Perceptron" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="olac.perceptron.Perceptron.J">
<code class="descname">J</code><span class="sig-paren">(</span><em>y</em>, <em>yhat</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.perceptron.Perceptron.J" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="olac.perceptron.Perceptron.backwardJ">
<code class="descname">backwardJ</code><span class="sig-paren">(</span><em>x0</em>, <em>w1</em>, <em>b1</em>, <em>w2</em>, <em>b2</em>, <em>y</em>, <em>yhat</em>, <em>alpha</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.perceptron.Perceptron.backwardJ" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="olac.perceptron.Perceptron.dJ_dy">
<code class="descname">dJ_dy</code><span class="sig-paren">(</span><em>y</em>, <em>yhat</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.perceptron.Perceptron.dJ_dy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="olac.perceptron.Perceptron.drelu_dz">
<code class="descname">drelu_dz</code><span class="sig-paren">(</span><em>z</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.perceptron.Perceptron.drelu_dz" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="olac.perceptron.Perceptron.dsig_dz">
<code class="descname">dsig_dz</code><span class="sig-paren">(</span><em>z</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.perceptron.Perceptron.dsig_dz" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="olac.perceptron.Perceptron.fit_model">
<code class="descname">fit_model</code><span class="sig-paren">(</span><em>X</em>, <em>labels</em>, <em>epochs</em>, <em>step</em>, <em>n_hidden</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.perceptron.Perceptron.fit_model" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="olac.perceptron.Perceptron.predict">
<code class="descname">predict</code><span class="sig-paren">(</span><em>x0</em>, <em>w1</em>, <em>b1</em>, <em>w2</em>, <em>b2</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.perceptron.Perceptron.predict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="olac.perceptron.Perceptron.relu">
<code class="descname">relu</code><span class="sig-paren">(</span><em>z</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.perceptron.Perceptron.relu" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="olac.perceptron.Perceptron.sig">
<code class="descname">sig</code><span class="sig-paren">(</span><em>z</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.perceptron.Perceptron.sig" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="olac.perceptron.Perceptron.train_network">
<code class="descname">train_network</code><span class="sig-paren">(</span><em>X</em>, <em>labels</em>, <em>step</em>, <em>nr_epochs</em>, <em>n_hidden</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.perceptron.Perceptron.train_network" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="olac.perceptron.PointsInCircum">
<code class="descclassname">olac.perceptron.</code><code class="descname">PointsInCircum</code><span class="sig-paren">(</span><em>r</em>, <em>n=100</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.perceptron.PointsInCircum" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="olac.perceptron.PointsInCircum2">
<code class="descclassname">olac.perceptron.</code><code class="descname">PointsInCircum2</code><span class="sig-paren">(</span><em>r</em>, <em>n=100</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.perceptron.PointsInCircum2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="olac.perceptron.generate_data">
<code class="descclassname">olac.perceptron.</code><code class="descname">generate_data</code><span class="sig-paren">(</span><em>n_samples</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.perceptron.generate_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="olac.perceptron.rand_cluster">
<code class="descclassname">olac.perceptron.</code><code class="descname">rand_cluster</code><span class="sig-paren">(</span><em>n</em>, <em>c</em>, <em>r</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.perceptron.rand_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>returns n random points in disk of radius r centered at c</p>
</dd></dl>

<dl class="function">
<dt id="olac.perceptron.random">
<code class="descclassname">olac.perceptron.</code><code class="descname">random</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; x in the interval [0, 1).<a class="headerlink" href="#olac.perceptron.random" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-olac.pipeline">
<span id="olac-pipeline-module"></span><h2>olac.pipeline module<a class="headerlink" href="#module-olac.pipeline" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="olac.pipeline.BatchQueue">
<em class="property">class </em><code class="descclassname">olac.pipeline.</code><code class="descname">BatchQueue</code><span class="sig-paren">(</span><em>maxsize=0</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.BatchQueue" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">queue.Queue</span></code></p>
<dl class="method">
<dt id="olac.pipeline.BatchQueue.get_all">
<code class="descname">get_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.BatchQueue.get_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all items present in the queue at the time of calling and return
them as a list, marking all the tasks as done immediately.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>list</strong></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">all current queue items</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="olac.pipeline.BatchQueue.put_all">
<code class="descname">put_all</code><span class="sig-paren">(</span><em>items</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.BatchQueue.put_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Put all the items in a list into the queue sequentially</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>(</strong><strong>iterable</strong><strong>)</strong> (<em>items</em>) – </td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="olac.pipeline.GridPredictor">
<em class="property">class </em><code class="descclassname">olac.pipeline.</code><code class="descname">GridPredictor</code><a class="headerlink" href="#olac.pipeline.GridPredictor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Mixin class to add a grid predictor to your base predictor class. The
class will add a get_grid and grid_predict method to your class,
that can be used to save model predictions done on a 250 by 250 grid
which can be used to plot the decision boundary.</p>
<dl class="method">
<dt id="olac.pipeline.GridPredictor.get_grid">
<code class="descname">get_grid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.GridPredictor.get_grid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="olac.pipeline.GridPredictor.grid_predict">
<code class="descname">grid_predict</code><span class="sig-paren">(</span><em>pipeline</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.GridPredictor.grid_predict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="olac.pipeline.LabellerBase">
<em class="property">class </em><code class="descclassname">olac.pipeline.</code><code class="descname">LabellerBase</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.LabellerBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base class for Labellers for use with the Pipeline.</p>
<p>No functionality is implemented here, this class should be subclassed and
all methods of the subclass should accept the same arguments.</p>
<p>The Pipeline argument to the methods gives access to the pipeline itself.
Pipeline.labelling_queue contains the points that are waiting for a
decision on labelling.</p>
<p>The Labeller may consume points from the labelling_queue, but putting
predictions into the training queue is handled by the Pipeline. Lists of
points to label should simply be returned by buy_labels for further
processing.</p>
<p>The labeller is stateful, so issues like e.g. tracking a budget for buying
labels can be handled using properties of the object. The same is true for
accumulating additional results.</p>
<p>See olac.pipeline.ThresholdLabeller for an example.</p>
<dl class="method">
<dt id="olac.pipeline.LabellerBase.buy_labels">
<code class="descname">buy_labels</code><span class="sig-paren">(</span><em>pipeline: olac.pipeline.Pipeline</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.LabellerBase.buy_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Split the available points into labelled and unlabelled using some
strategy. Should return two lists of QueuePoints: the list of points
for which labels have been bought, and the remaining unlabelled points.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pipeline</strong> (<em>the calling Pipeline object</em>) – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>list, list</strong></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">labelled points, unlabelled points</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="olac.pipeline.LabellerBase.buy_labels_condition">
<code class="descname">buy_labels_condition</code><span class="sig-paren">(</span><em>pipeline: olac.pipeline.Pipeline</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.LabellerBase.buy_labels_condition" title="Permalink to this definition">¶</a></dt>
<dd><p>Called continuously when not busy with labelling. Should return true
when the condition is met for buying new labels.</p>
<p>If calculating the condition requires access to the datapoints
themselves, make sure to store them in an object property as they will
no longer be available in the queue for buy_labels.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pipeline</strong> (<em>the calling Pipeline object</em>) – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>bool</strong></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Whether to call self.buy_labels this iteration</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="olac.pipeline.OfflinePredictor">
<em class="property">class </em><code class="descclassname">olac.pipeline.</code><code class="descname">OfflinePredictor</code><span class="sig-paren">(</span><em>batch_size</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.OfflinePredictor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#olac.pipeline.GridPredictor" title="olac.pipeline.GridPredictor"><code class="xref py py-class docutils literal notranslate"><span class="pre">olac.pipeline.GridPredictor</span></code></a>, <a class="reference internal" href="#olac.pipeline.PredictorBase" title="olac.pipeline.PredictorBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">olac.pipeline.PredictorBase</span></code></a></p>
<p>A simple predictor for use with non-online models. The corresponding
pipeline.model should implement the partial_fit and the decision_function
or predict_proba methods.</p>
<dl class="method">
<dt id="olac.pipeline.OfflinePredictor.do_prediction">
<code class="descname">do_prediction</code><span class="sig-paren">(</span><em>pipeline</em>, <em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.OfflinePredictor.do_prediction" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a prediction. If the model has not yet been fit (burn-in phase),
return NaNs.</p>
</dd></dl>

<dl class="method">
<dt id="olac.pipeline.OfflinePredictor.train_condition">
<code class="descname">train_condition</code><span class="sig-paren">(</span><em>pipeline</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.OfflinePredictor.train_condition" title="Permalink to this definition">¶</a></dt>
<dd><p>Train anytime there are batch_size points in the queue</p>
</dd></dl>

<dl class="method">
<dt id="olac.pipeline.OfflinePredictor.train_pipeline_model">
<code class="descname">train_pipeline_model</code><span class="sig-paren">(</span><em>pipeline</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.OfflinePredictor.train_pipeline_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Rertrain the model using all points available in the training queue
plus all the points you’ve come across before using pipeline.model.fit.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="olac.pipeline.OnlinePredictor">
<em class="property">class </em><code class="descclassname">olac.pipeline.</code><code class="descname">OnlinePredictor</code><span class="sig-paren">(</span><em>verbose=True</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.OnlinePredictor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#olac.pipeline.PredictorBase" title="olac.pipeline.PredictorBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">olac.pipeline.PredictorBase</span></code></a></p>
<p>A simple predictor for use with online models. The corresponding
pipeline.model should implement the partial_fit and the decision_function
methods.</p>
<dl class="method">
<dt id="olac.pipeline.OnlinePredictor.do_prediction">
<code class="descname">do_prediction</code><span class="sig-paren">(</span><em>pipeline</em>, <em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.OnlinePredictor.do_prediction" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a prediction. If the model has not yet been fit (burn-in phase),
return NaNs.</p>
</dd></dl>

<dl class="method">
<dt id="olac.pipeline.OnlinePredictor.train_condition">
<code class="descname">train_condition</code><span class="sig-paren">(</span><em>pipeline</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.OnlinePredictor.train_condition" title="Permalink to this definition">¶</a></dt>
<dd><p>Train anytime there are points available in the training queue</p>
</dd></dl>

<dl class="method">
<dt id="olac.pipeline.OnlinePredictor.train_pipeline_model">
<code class="descname">train_pipeline_model</code><span class="sig-paren">(</span><em>pipeline</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.OnlinePredictor.train_pipeline_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the model using all points available in the training queue
using pipeline.model.partial_fit.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="olac.pipeline.Pipeline">
<em class="property">class </em><code class="descclassname">olac.pipeline.</code><code class="descname">Pipeline</code><span class="sig-paren">(</span><em>data_generator=None</em>, <em>model=None</em>, <em>predictor=None</em>, <em>labeller=None</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.Pipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The pipeline runner class for backtesting online or dynamically
retrained models.</p>
<p>The pipeline gets data points from the data_generator and runs two
worker threads in parallel, one for making predictions and retraining, and
the other for buying labels. Their behaviour can be configured using
the predictor and the labeller.</p>
<p>The Pipeline also has properties which can be used by the labeller and the
predictor for communicating with each other:
* labelling_queue is the BatchQueue of points waiting to (potentially)</p>
<blockquote>
<div>be labelled</div></blockquote>
<ul class="simple">
<li><dl class="first docutils">
<dt>training_queue is the BatchQueue of labelled points available for</dt>
<dd>model (re)training</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>stop_flag is set when the data_generator has been exhausted, and signals</dt>
<dd>that the labelling worker should stop working and return its results.</dd>
</dl>
</li>
</ul>
<dl class="method">
<dt id="olac.pipeline.Pipeline.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.Pipeline.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the pipeline until the data_generator is exhausted.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><strong>tuple</strong> (<em>(training_set, eval_set)</em>)</li>
<li><em>Training set is the list of QueuePoints that was labelled, and eval_set</em></li>
<li><em>is the list of points that were not labelled.</em></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="olac.pipeline.PredictorBase">
<em class="property">class </em><code class="descclassname">olac.pipeline.</code><code class="descname">PredictorBase</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.PredictorBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base class for Predictors for use with the Pipeline.</p>
<p>No functionality is implemented here, this class should be subclassed and
all methods of the subclass should accept the same arguments.</p>
<p>The Pipeline argument to the methods gives access to the pipeline itself.
Pipeline.training_queue contains the points that are available for training,
and pipeline.model is the pipeline’s model, which should implement the
scikit-learn api.</p>
<p>The Predictor may consume points from the training_queue, but putting
predictions into the labelling queue is handled by the Pipeline. Predictions
should simply be returned by do_prediction for further processing.</p>
<p>See olac.pipeline.OnlinePredictor for an example.</p>
<dl class="method">
<dt id="olac.pipeline.PredictorBase.do_prediction">
<code class="descname">do_prediction</code><span class="sig-paren">(</span><em>pipeline</em>, <em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.PredictorBase.do_prediction" title="Permalink to this definition">¶</a></dt>
<dd><p>Use pipeline.model to make a prediction on point x. Should return
the predicted class, as well as a measure of certainty.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pipeline</strong> (<em>the calling Pipeline object</em>) – </li>
<li><strong>x</strong> (<em>the data point to predict</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>float, float</strong></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">prediction, certainty</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="olac.pipeline.PredictorBase.train_condition">
<code class="descname">train_condition</code><span class="sig-paren">(</span><em>pipeline</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.PredictorBase.train_condition" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a new data point is pulled from the data generator in the
pipeline. This is the test for whether the model should be trained
this iteration, before making the next prediction.</p>
<p>If calculating the condition requires access to the datapoints
themselves, make sure to store them in an object property as they will
no longer be available in the queue for train_pipeline_model.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pipeline</strong> (<em>the calling Pipeline object</em>) – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>bool</strong></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Whether to call self.train_pipeline_model this iteration</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="olac.pipeline.PredictorBase.train_pipeline_model">
<code class="descname">train_pipeline_model</code><span class="sig-paren">(</span><em>pipeline</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.PredictorBase.train_pipeline_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by the Pipeline if self.train_condition is true. Should
implement the logic for training pipeline.model (i.e. should call
pipeline.model.fit or pipeline.model.partial_fit at some point).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pipeline</strong> (<em>the calling Pipeline object</em>) – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="olac.pipeline.QueuePoint">
<em class="property">class </em><code class="descclassname">olac.pipeline.</code><code class="descname">QueuePoint</code><span class="sig-paren">(</span><em>point</em>, <em>index</em>, <em>predicted_label=None</em>, <em>prob=None</em>, <em>true_label=None</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.QueuePoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A data class for queued data points</p>
<dl class="method">
<dt id="olac.pipeline.QueuePoint.to_tuple">
<code class="descname">to_tuple</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.QueuePoint.to_tuple" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the QueuePoint to a tuple.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><strong>tuple</strong> (<em>(point, index, predicted_label, prob, true_label,)</em>)</li>
<li><strong>See also</strong> (<em>olac.utils.queue_point_list_to_df</em>)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="olac.pipeline.ThresholdLabeller">
<em class="property">class </em><code class="descclassname">olac.pipeline.</code><code class="descname">ThresholdLabeller</code><span class="sig-paren">(</span><em>threshold</em>, <em>prob</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.ThresholdLabeller" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#olac.pipeline.LabellerBase" title="olac.pipeline.LabellerBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">olac.pipeline.LabellerBase</span></code></a></p>
<p>A simple labeller. Once the number of points in the
pipeline.labelling_queue reaches a certain threshold, all points are
retrieved. Points are then randomly labelled with a certain probability.</p>
<p>The total number of labels purchased is tracked using an internal
property. This could be used for budgeting.</p>
<dl class="method">
<dt id="olac.pipeline.ThresholdLabeller.buy_labels">
<code class="descname">buy_labels</code><span class="sig-paren">(</span><em>pipeline: olac.pipeline.Pipeline</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.ThresholdLabeller.buy_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all the points from the labelling queue and label them with
some probability.</p>
</dd></dl>

<dl class="method">
<dt id="olac.pipeline.ThresholdLabeller.buy_labels_condition">
<code class="descname">buy_labels_condition</code><span class="sig-paren">(</span><em>pipeline: olac.pipeline.Pipeline</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.ThresholdLabeller.buy_labels_condition" title="Permalink to this definition">¶</a></dt>
<dd><p>Buy labels if the labelling_queue is longer than the threshold.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="olac.pipeline.err_handler">
<code class="descclassname">olac.pipeline.</code><code class="descname">err_handler</code><span class="sig-paren">(</span><em>e: Exception</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.pipeline.err_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>A simple error handler for threads that raises any Exceptions that occur.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>e</strong> (<em>The Exception being raised</em>) – </td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-olac.utils">
<span id="olac-utils-module"></span><h2>olac.utils module<a class="headerlink" href="#module-olac.utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="olac.utils.data_prep">
<code class="descclassname">olac.utils.</code><code class="descname">data_prep</code><span class="sig-paren">(</span><em>X</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.utils.data_prep" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare data points for input in keras model. For now it just scales.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>X</strong> (<em>ndarray</em>) – Input points</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="olac.utils.dim_correct">
<code class="descclassname">olac.utils.</code><code class="descname">dim_correct</code><span class="sig-paren">(</span><em>x</em>, <em>axis=1</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.utils.dim_correct" title="Permalink to this definition">¶</a></dt>
<dd><p>Check and dimensionality of the input array and add one if number of dimensions is zero.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>ndarray</em>) – The array to be validated and or corrected</li>
<li><strong>axis</strong> (<em>int</em><em> [</em><em>0</em><em>, </em><em>1</em><em>] </em><em>(</em><em>Optional</em><em>)</em>) – The axis to which to add the dimension, 0 results in a row vector/array
1 results in a columns vector/array</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>x</strong> – The original input array if the dimension were already greather than 0
otherwise with a second dimension of 1 added.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="olac.utils.queue_point_list_to_df">
<code class="descclassname">olac.utils.</code><code class="descname">queue_point_list_to_df</code><span class="sig-paren">(</span><em>qp_list</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.utils.queue_point_list_to_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a list of QueuePoints to a pandas DataFrame</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>qp_list</strong> (<em>list</em><em>[</em><a class="reference internal" href="#olac.pipeline.QueuePoint" title="olac.pipeline.QueuePoint"><em>QueuePoint</em></a><em>]</em>) – The list of QueuePoints to convert</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>pandas.DataFrame</strong></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">A dataframe containing all the QueuePoint information</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="olac.utils.rotation_matrix">
<code class="descclassname">olac.utils.</code><code class="descname">rotation_matrix</code><span class="sig-paren">(</span><em>theta: float</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.utils.rotation_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a rotation matrix to rotate a 2d vector by theta.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>theta</strong> (<em>float</em>) – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">The 2x2 rotation matrix</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="olac.utils.set_path">
<code class="descclassname">olac.utils.</code><code class="descname">set_path</code><span class="sig-paren">(</span><em>level=1</em>, <em>change_path=True</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.utils.set_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the path to the olac/olac directory or insert it in the path.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>level</strong> (<em>int</em>) – The number of levels you are removed from the olac parent
directory. Maximum of two levels are implemented.</li>
<li><strong>change_path</strong> (<em>boolean</em>) – True - Change the working directory
False - Inset the path to the python path</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>None</strong> – The function does not return anything</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">nonetype</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-olac.vis">
<span id="olac-vis-module"></span><h2>olac.vis module<a class="headerlink" href="#module-olac.vis" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="olac.vis.GetNewMetric">
<em class="property">class </em><code class="descclassname">olac.vis.</code><code class="descname">GetNewMetric</code><a class="headerlink" href="#olac.vis.GetNewMetric" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="staticmethod">
<dt id="olac.vis.GetNewMetric.get_new_accuracy">
<em class="property">static </em><code class="descname">get_new_accuracy</code><span class="sig-paren">(</span><em>labels</em>, <em>model=None</em>, <em>weights=None</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.vis.GetNewMetric.get_new_accuracy" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the accuracy and stuff back to display how it changes over time</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>data</strong> (<em>ndarray | shape</em><em> (</em><em>N</em><em>, </em><em>2</em><em>)</em>) – New clusters to classify</li>
<li><strong>model</strong> (<em>Model class</em>) – Keras based deep learning model class</li>
<li><strong>labels</strong> (<em>ndarray | shape</em><em> (</em><em>N</em><em>, </em><em>)</em>) – Labels of the datapoints.</li>
<li><strong>weights</strong> (<em>tuple</em>) – w1, b1, w2, b2</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="olac.vis.GetNewMetric.get_new_precision">
<em class="property">static </em><code class="descname">get_new_precision</code><span class="sig-paren">(</span><em>labels</em>, <em>model=None</em>, <em>weights=None</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.vis.GetNewMetric.get_new_precision" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the accuracy and stuff back to display how it changes over time
Assumes 1 is the positive label!!
:param data: New clusters to classify
:type data: ndarray | shape (N, 2)
:param model: Keras based deep learning model class
:type model: Model class
:param labels: Labels of the datapoints.
:type labels: ndarray | shape (N, )
:param weights: w1, b1, w2, b2
:type weights: tuple</p>
</dd></dl>

<dl class="staticmethod">
<dt id="olac.vis.GetNewMetric.get_new_recall">
<em class="property">static </em><code class="descname">get_new_recall</code><span class="sig-paren">(</span><em>labels</em>, <em>model=None</em>, <em>weights=None</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.vis.GetNewMetric.get_new_recall" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the accuracy and stuff back to display how it changes over time
Assumes 1 is the positive label!!
:param data: New clusters to classify
:type data: ndarray | shape (N, 2)
:param model: Keras based deep learning model class
:type model: Model class
:param labels: Labels of the datapoints.
:type labels: ndarray | shape (N, )
:param weights: w1, b1, w2, b2
:type weights: tuple</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="olac.vis.demo_plot">
<code class="descclassname">olac.vis.</code><code class="descname">demo_plot</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#olac.vis.demo_plot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="olac.vis.get_fun_map">
<code class="descclassname">olac.vis.</code><code class="descname">get_fun_map</code><span class="sig-paren">(</span><em>xlim</em>, <em>ylim</em>, <em>weights</em>, <em>MODEL</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.vis.get_fun_map" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="olac.vis.main">
<code class="descclassname">olac.vis.</code><code class="descname">main</code><span class="sig-paren">(</span><em>MODEL</em>, <em>GENERATOR</em>, <em>metric</em>, <em>weights=None</em>, <em>window=20</em>, <em>p_train=10</em>, <em>write=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.vis.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Display the model accuracy, recall or precision over time together with the data points as predicted
by the model.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>MODEL</strong> (<em>Object</em>) – Keras model or Perceptron Object as made by us</li>
<li><strong>GENERATOR</strong> (<em>generator object?</em>) – Generator that simulates the datapoints. For example popping clusters or roving balls</li>
<li><strong>metric</strong> (<em>string</em>) – “accuracy”, “precision” or “recall”: Which metric you want to display over time.</li>
<li><strong>weights</strong> (<em>ndarray</em>) – If you have a pretrained perceptron, you can input the learned weights here. For a keras
model this should be saved in the model object.</li>
<li><strong>window</strong> (<em>int</em>) – Size of the sliding window: How many datapoints you want to predict at the same time</li>
<li><strong>p_train</strong> (<em>int</em>) – percentage of datapoints you want to use for training</li>
<li><strong>**kwargs</strong> – Input for the generator</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="olac.vis.plot_linear_ls">
<code class="descclassname">olac.vis.</code><code class="descname">plot_linear_ls</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>window_size=10</em>, <em>constant=True</em>, <em>colour='r'</em>, <em>label=None</em><span class="sig-paren">)</span><a class="headerlink" href="#olac.vis.plot_linear_ls" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the linear fits for each period</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>ndarray</em>) – The independent variables, features, over which to fit</li>
<li><strong>y</strong> (<em>ndarray</em>) – The dependent variable which we want approximate</li>
<li><strong>window_size</strong> (<em>int</em><em> (</em><em>optional</em><em>)</em>) – The number of observations that will included in a period</li>
<li><strong>constant</strong> (<em>boolean</em><em> (</em><em>optional</em><em>)</em>) – Whether a constant should be added, default is True</li>
<li><strong>colour</strong> (<em>str</em>) – The colour paramter to be passed to pyplot</li>
<li><strong>label</strong> (<em>str</em>) – The label parameter to be passed to pyplot</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>coefs</strong> (<em>ndarray</em>) – An numpy array containing the coefficients.</li>
<li><strong>ind</strong> (<em>list</em>) – The indexes of the periods</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-olac">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-olac" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="modules.html" class="btn btn-neutral float-right" title="olac" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="log.html" class="btn btn-neutral" title="Decisions and logs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Susanne Groothuis, Bram Schermer, John Paton, Ralph Urlus.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>